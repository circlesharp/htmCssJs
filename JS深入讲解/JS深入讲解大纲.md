# JS深入讲解

## JS变量、作用域
1. 基本类型 vs 引用类型
    基本类型：4 "str" true undefined null
    引用类型： {} []
2. 变量的访问
    1. 按值访问，直接访问在栈里面的值
    2. 按引用访问，访问栈里的地址，再到堆里面访问值
    3. 栈是有序的，但是空间固定；堆是无序的，但是没有空间的限制；堆的值把地址保存在栈里
3. 变量的比较
    1. 基本类型值一样就是 ===
    2. 引用类型值一样也是 !==
    3. 如果要判断两个引用类型是否“长得一样”，就使用遍历
4. 变量值的复制
    1. 基本类型互不干涉，赋值之后就是复制了
    2. 引用类型如果在增加一次引用，所指的对象都是同一个
    3. 如果想给一个引用对象创建副本，通过遍历复制（浅拷贝）
    4. 深拷贝用递归
5. 参数的传递
    1. 基本类型传参，相当于做了一次值的拷贝
    2. 引用类型传参，也是传递“值”，这个值就是地址
    3. 只要是参数传达，都是传递值
6. 检测类型
    1. 常见类型
        -> 4 "string" true undefined null [] {} function RegExp
    2. 对于基本类型，使用 typeof
        -> typeof(4)
    3. 对于引用类型，使用 instanceof
        -> [] instanceof Array
        -> {} instanceof Object
        -> 4 instanceof Number (一定返回false，因为基本类型不能用 instanceof)
7. 变量的作用域
    1. 也被称为变量的执行环境；
        能够起作用，区域于：①变量的生命周期；②访问到变量
    2. 局部作用域：
        JS中，一般指函数里面的
        生命周期：函数执行完毕之后，就挂了
    3. 全局作用域：
        生命周期：整个程序执行完毕之后
    4. JS中没有块级作用域
8. 变量对象
    1. 全局空间，就是 window对象
        window 就是全局作用域之下的变量对象
        即 name === window.name ; fn === window.name
    2. 局部作用域之下的变量对象是看不见的
        如果fn里面有一个age，可以这样理解：fn.age（虽然这样不能访问）
    3. 细节：如果不存在的变量xx直接使用，会报错；但是如果通过window.xx，就是undefine。
9. 作用域链
    1. 访问一个变量，走“链”的路线，先出自己作用域查找，再一直往外边。
        外层没有办法访问里层。
    2. 局部的优先级最高，也最快
    3. 延长作用域链
        通过 with，能新增一个作用域
        但是，很多问题，不推荐
10. JS解析机制
    1. 预解析
        1. 碰到 var，将变量名都赋值为 undefined
            不通过var声明的变量不会被预解析
        2. 碰到 function，就会把函数给定义好
    2. 逐行解读代码
        1. 碰到 var，赋值
        2. 碰到 function，跳过（因为预解析已经done）
            所以这是如果调用函数，函数的局部变量如果还没来得及赋值，就是undefined
    3. 如果发出冲突：
        函数优先级高于变量
        同等优先级后面的高（顺序执行）
    4. 因为预解析的存在，不建议函数在块里面定义（因为可能不能解析）
    5. 预解析是分标签进行的（在不同的script标签中，不能预解析）
11. 垃圾回收机制
    1. 含义：释放无用的数据，回收内存
    2. 原理：找出没用的数据，打上标记，释放内存；周期性执行
    3. 标识无用数据的策略（自动回收）
        1. 标记清除（主流）
            环境中的变量
        2. 引用计数
            跟踪数据引用的数据（Python的方式）
            会出现循环引用的问题
12. 内存管理
    1. 解除引用
        适用大多数全局变量
        ** = null;

## 函数
0. 学习方向
    1. 函数是什么
    2. 函数的定义和调用
    3. 函数的参数和返回值
1. JS中的对象
    1. 对象：任意值的集合，键值对
    2. 感觉是Python字典和对象的混合，有属性和方法的区分。
2. 如何使用对象
    1. 创建
        1. 字面量创建的方式 -> var xx = {};
        2. 构造函数的方式   -> var xx = new Object();
    2. 访问
        1. xx.name
        2. xx["name"]
    3. 删除
        delete xx.name;
        注意，如果没有值，是undefined，不会报错（联系 window.name)
    4. 成员关系
        "name" in xx
    5. 枚举 - for in
        for (p in xx) {p; xx[p];}
3. 什么是函数
    1. 一次封装（定义），四处使用（调用）
    2. 
